{"ast":null,"code":"var _jsxFileName = \"/Users/boronoff/pixel-guess/frontend/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { gameApi } from \"./services/api\";\nimport HomePage from \"./components/HomePage\";\nimport BetSelection from \"./components/BetSelection\";\nimport GamePage from \"./components/GamePage\";\nimport ResultPage from \"./components/ResultPage\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [gameState, setGameState] = useState(\"home\");\n  const [userBalance, setUserBalance] = useState(1000);\n  const [selectedBet, setSelectedBet] = useState(10);\n  const [currentRound, setCurrentRound] = useState(null);\n  const [lastResult, setLastResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Загружаем баланс при старте\n  useEffect(() => {\n    loadUserBalance();\n  }, []);\n  const loadUserBalance = async () => {\n    try {\n      const balance = await gameApi.getUserBalance();\n      setUserBalance(balance);\n    } catch (err) {\n      console.error(\"Ошибка загрузки баланса:\", err);\n    }\n  };\n  const handleStartGame = () => {\n    setError(null);\n    setGameState(\"bet-selection\");\n  };\n  const handleBetSelected = async bet => {\n    if (bet > userBalance) {\n      setError(\"Недостаточно фишек\");\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    setSelectedBet(bet);\n    try {\n      const newRound = await gameApi.getNewGame();\n      setCurrentRound(newRound);\n      setGameState(\"game\");\n    } catch (err) {\n      console.error(\"Ошибка создания игры:\", err);\n      setError(\"Ошибка создания игры\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAnswer = async (answer, responseTime) => {\n    if (!currentRound) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const result = await gameApi.submitAnswer({\n        roundId: currentRound.roundId,\n        userAnswer: answer,\n        bet: selectedBet,\n        responseTime\n      });\n      setLastResult(result);\n      setUserBalance(result.newBalance);\n      setGameState(\"result\");\n    } catch (err) {\n      console.error(\"Ошибка отправки ответа:\", err);\n      setError(\"Ошибка отправки ответа\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handlePlayAgain = () => {\n    setGameState(\"bet-selection\");\n    setLastResult(null);\n    setCurrentRound(null);\n  };\n  const handleGoHome = () => {\n    setGameState(\"home\");\n    setLastResult(null);\n    setCurrentRound(null);\n  };\n  const renderCurrentState = () => {\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this);\n    }\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleGoHome,\n          children: \"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this);\n    }\n    switch (gameState) {\n      case \"home\":\n        return /*#__PURE__*/_jsxDEV(HomePage, {\n          balance: userBalance,\n          onStartGame: handleStartGame\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 16\n        }, this);\n      case \"bet-selection\":\n        return /*#__PURE__*/_jsxDEV(BetSelection, {\n          balance: userBalance,\n          onBetSelected: handleBetSelected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this);\n      case \"game\":\n        return currentRound ? /*#__PURE__*/_jsxDEV(GamePage, {\n          gameRound: currentRound,\n          bet: selectedBet,\n          onAnswer: handleAnswer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this) : null;\n      case \"result\":\n        return lastResult ? /*#__PURE__*/_jsxDEV(ResultPage, {\n          result: lastResult,\n          onPlayAgain: handlePlayAgain,\n          onGoHome: handleGoHome\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this) : null;\n      default:\n        return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: renderCurrentState()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"oUSYuParFTtjTsCiGHUDQllpf+c=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","gameApi","HomePage","BetSelection","GamePage","ResultPage","jsxDEV","_jsxDEV","App","_s","gameState","setGameState","userBalance","setUserBalance","selectedBet","setSelectedBet","currentRound","setCurrentRound","lastResult","setLastResult","loading","setLoading","error","setError","loadUserBalance","balance","getUserBalance","err","console","handleStartGame","handleBetSelected","bet","newRound","getNewGame","handleAnswer","answer","responseTime","result","submitAnswer","roundId","userAnswer","newBalance","handlePlayAgain","handleGoHome","renderCurrentState","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onStartGame","onBetSelected","gameRound","onAnswer","onPlayAgain","onGoHome","_c","$RefreshReg$"],"sources":["/Users/boronoff/pixel-guess/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { GameRound, Direction, AnswerResponse, BetAmount } from \"./types/game\";\nimport { gameApi } from \"./services/api\";\nimport HomePage from \"./components/HomePage\";\nimport BetSelection from \"./components/BetSelection\";\nimport GamePage from \"./components/GamePage\";\nimport ResultPage from \"./components/ResultPage\";\nimport \"./App.css\";\n\ntype GameState = \"home\" | \"bet-selection\" | \"game\" | \"result\";\n\nconst App: React.FC = () => {\n  const [gameState, setGameState] = useState<GameState>(\"home\");\n  const [userBalance, setUserBalance] = useState(1000);\n  const [selectedBet, setSelectedBet] = useState<BetAmount>(10);\n  const [currentRound, setCurrentRound] = useState<GameRound | null>(null);\n  const [lastResult, setLastResult] = useState<AnswerResponse | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Загружаем баланс при старте\n  useEffect(() => {\n    loadUserBalance();\n  }, []);\n\n  const loadUserBalance = async () => {\n    try {\n      const balance = await gameApi.getUserBalance();\n      setUserBalance(balance);\n    } catch (err) {\n      console.error(\"Ошибка загрузки баланса:\", err);\n    }\n  };\n\n  const handleStartGame = () => {\n    setError(null);\n    setGameState(\"bet-selection\");\n  };\n\n  const handleBetSelected = async (bet: BetAmount) => {\n    if (bet > userBalance) {\n      setError(\"Недостаточно фишек\");\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    setSelectedBet(bet);\n\n    try {\n      const newRound = await gameApi.getNewGame();\n      setCurrentRound(newRound);\n      setGameState(\"game\");\n    } catch (err) {\n      console.error(\"Ошибка создания игры:\", err);\n      setError(\"Ошибка создания игры\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAnswer = async (answer: Direction, responseTime: number) => {\n    if (!currentRound) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const result = await gameApi.submitAnswer({\n        roundId: currentRound.roundId,\n        userAnswer: answer,\n        bet: selectedBet,\n        responseTime,\n      });\n\n      setLastResult(result);\n      setUserBalance(result.newBalance);\n      setGameState(\"result\");\n    } catch (err) {\n      console.error(\"Ошибка отправки ответа:\", err);\n      setError(\"Ошибка отправки ответа\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePlayAgain = () => {\n    setGameState(\"bet-selection\");\n    setLastResult(null);\n    setCurrentRound(null);\n  };\n\n  const handleGoHome = () => {\n    setGameState(\"home\");\n    setLastResult(null);\n    setCurrentRound(null);\n  };\n\n  const renderCurrentState = () => {\n    if (loading) {\n      return (\n        <div className=\"loading\">\n          <div className=\"spinner\"></div>\n          <p>Загрузка...</p>\n        </div>\n      );\n    }\n\n    if (error) {\n      return (\n        <div className=\"error\">\n          <p>{error}</p>\n          <button onClick={handleGoHome}>На главную</button>\n        </div>\n      );\n    }\n\n    switch (gameState) {\n      case \"home\":\n        return <HomePage balance={userBalance} onStartGame={handleStartGame} />;\n\n      case \"bet-selection\":\n        return (\n          <BetSelection\n            balance={userBalance}\n            onBetSelected={handleBetSelected}\n          />\n        );\n\n      case \"game\":\n        return currentRound ? (\n          <GamePage\n            gameRound={currentRound}\n            bet={selectedBet}\n            onAnswer={handleAnswer}\n          />\n        ) : null;\n\n      case \"result\":\n        return lastResult ? (\n          <ResultPage\n            result={lastResult}\n            onPlayAgain={handlePlayAgain}\n            onGoHome={handleGoHome}\n          />\n        ) : null;\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"app\">\n      <div className=\"container\">{renderCurrentState()}</div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}