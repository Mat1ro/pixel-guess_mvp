# Техническое задание: Pixel-Guess Trainer (MVP)

## 1. Общее описание проекта

**Pixel-Guess Trainer** — веб-приложение для тренировки навыков прогнозирования движения цен на основе реальных ценовых графиков криптовалют.

### Цель MVP

Создать базовую версию игры с основной механикой угадывания направления цены для локального использования с рандомными коэффициентами выигрыша.

## 2. Функциональные требования

### 2.1 Основная игровая механика

- **Игровой процесс**: Пользователь видит обрезанный и замаскированный график цены, должен угадать направление следующего движения
- **Варианты ответов**: UP (вверх), DOWN (вниз)
- **Таймер**: 3 секунды на принятие решения
- **Система ставок**: Выбор размера ставки (10/50/100 фишек)
- **Подсчёт результатов**: Показ правильного ответа и начисление/списание фишек

### 2.2 Система очков и фишек

- **Стартовый баланс**: 1000 фишек
- **Коэффициенты выплат**: Рандомный коэффициент от 1.5x до 3.0x
- **Потеря ставки при неправильном ответе**

### 2.3 Интерфейс пользователя

- **Главная страница**: Баланс фишек, кнопка "Начать игру"
- **Страница выбора ставки**: Кнопки выбора ставки (10/50/100), кнопка "Готов"
- **Игровая страница**: График, кнопки UP/DOWN, таймер
- **Страница результатов**: Показ правильного ответа, изменение баланса

## 3. Технические требования

### 3.1 Технологический стек

- **Frontend**: React.js с TypeScript
- **Backend**: FastAPI (Python)
- **База данных**: Не используется в MVP (данные в памяти)
- **Графики**: Chart.js или Recharts
- **Архитектура**: SPA (Single Page Application)

### 3.2 Структура проекта

```
pixel-guess/
├── frontend/
│   ├── public/
│   │   └── index.html
│   ├── src/
│   │   ├── components/
│   │   │   ├── HomePage.tsx
│   │   │   ├── BetSelection.tsx
│   │   │   ├── GamePage.tsx
│   │   │   ├── ResultPage.tsx
│   │   │   └── Chart.tsx
│   │   ├── services/
│   │   │   └── api.ts
│   │   ├── types/
│   │   │   └── game.ts
│   │   ├── App.tsx
│   │   └── index.tsx
│   ├── package.json
│   └── tsconfig.json
├── backend/
│   ├── app/
│   │   ├── main.py
│   │   ├── models/
│   │   │   └── game.py
│   │   ├── routes/
│   │   │   └── game.py
│   │   └── services/
│   │       └── game_service.py
│   ├── data/
│   │   └── price_data.json
│   └── requirements.txt
└── README.md
```

### 3.3 API Endpoints

- `GET /api/game/new` - Получение нового игрового раунда
- `POST /api/game/answer` - Отправка ответа пользователя
- `GET /api/user/balance` - Получение текущего баланса
- `POST /api/user/balance` - Обновление баланса

## 4. Данные и модели

### 4.1 Модель игрового раунда

```javascript
{
  id: string,
  chartData: number[],      // Видимая часть графика
  hiddenData: number[],     // Скрытая часть для проверки
  correctAnswer: 'UP'|'DOWN',
  timestamp: number,
  pair: string             // Например, "ETH-USDT"
}
```

### 4.2 Модель пользователя

```javascript
{
  id: string,
  balance: number,
  gamesPlayed: number,
  gamesWon: number,
  totalWinnings: number
}
```

### 4.3 Модель игровой сессии

```javascript
{
  sessionId: string,
  userId: string,
  roundId: string,
  bet: number,
  userAnswer: 'UP'|'DOWN',
  responseTime: number,
  isCorrect: boolean,
  payout: number,
  timestamp: number
}
```

## 5. Алгоритм определения направления

### 5.1 Логика определения правильного ответа

- **UP**: Цена в конце скрытого сегмента выше начальной на > 0.1%
- **DOWN**: Цена в конце скрытого сегмента ниже начальной на > 0.1%

### 5.2 Обработка данных

- Использование реальных исторических данных криптовалют
- Сегменты по 20-30 точек (видимые) + 10-15 точек (скрытые)
- Применение фильтров для сглаживания ("замыливания")

## 6. Пользовательский опыт

### 6.1 Игровой процесс

1. Пользователь видит главную страницу с балансом
2. Нажимает "Начать игру"
3. Выбирает размер ставки (10/50/100) и нажимает "Готов"
4. Перенаправляется на игровую страницу с графиком и таймером
5. Делает выбор направления (UP/DOWN)
6. Видит результат с коэффициентом и обновлённый баланс
7. Может начать новый раунд

### 6.2 Визуальный дизайн

- **Цветовая схема**: Темная тема с зелёными/красными акцентами
- **График**: Свечной или линейный график с эффектом размытия
- **Анимации**: Плавные переходы между экранами
- **Адаптивность**: Поддержка мобильных устройств

## 7. Ограничения MVP

### 7.1 Что НЕ включено в MVP

- Интеграция с Telegram
- Лидерборды
- Система достижений
- Wheel of Fortune
- Мультиплеер
- Выплаты и депозиты

### 7.2 Упрощения для MVP

- Один тип криптовалютной пары (ETH-USDT)
- Рандомные коэффициенты вместо зависимости от скорости
- Простая статистика
- Данные хранятся в памяти (без базы данных)

## 8. Критерии готовности

### 8.1 Функциональные тесты

- [ ] Загрузка и отображение графика
- [ ] Работа таймера
- [ ] Корректное определение правильного ответа
- [ ] Расчёт и начисление фишек
- [ ] Сохранение состояния в памяти

### 8.2 Производительность

- Время загрузки игры < 2 секунд
- Отклик интерфейса < 100ms
- Корректная работа на мобильных устройствах

## 9. Дальнейшее развитие

### 9.1 Следующие итерации

- Интеграция с Telegram Bot API
- Система рейтингов и лидербордов
- Больше криптовалютных пар
- Колесо фортуны
- Система достижений

### 9.2 Потенциальные улучшения

- Различные уровни сложности
- Турнирный режим
- Социальные функции
- Аналитика игрока
